digraph controller_fsm {
    // rankdir = "LR";

    node [shape=point] RESET;

    node [shape=box, margin=0];
    IDLE;
    RS_START;
    RD_MISS;
    RD_EVICT_WORD0;
    RD_EVICT_WORD1;
    RD_EVICT_WORD2;
    RD_EVICT_WORD3;
    RD_EVICT_WAIT0;
    RD_EVICT_WAIT1;
    RD_EVICT_WAIT2;
    RD_EVICT_DONE;
    RD_LOAD_WORD0;
    RD_LOAD_WORD1;
    RD_LOAD_WORD2;
    RD_LOAD_WORD3;
    RD_LOAD_WAIT0;
    RD_LOAD_DONE;

    START_WR;
    WR_MISS;

    RESET -> IDLE;

    IDLE -> RS_START;
    RS_START -> RD_MISS;

    RD_MISS -> RD_EVICT_WORD0;

    RD_EVICT_WORD0 -> RD_EVICT_WORD1;
    RD_EVICT_WORD1 -> RD_EVICT_WORD2;
    RD_EVICT_WORD2 -> RD_EVICT_WORD3;
    RD_EVICT_WORD3 -> RD_EVICT_WAIT0;

    RD_EVICT_WAIT0 -> RD_EVICT_WAIT1;
    RD_EVICT_WAIT1 -> RD_EVICT_WAIT2;
    RD_EVICT_WAIT2 -> RD_EVICT_WAIT3;
    RD_EVICT_WAIT3 -> RD_EVICT_DONE;

    RD_EVICT_DONE -> RD_LOAD_WORD0;

    RD_LOAD_WORD0 -> RD_LOAD_WORD1;
    RD_LOAD_WORD1 -> RD_LOAD_WORD2;
    RD_LOAD_WORD2 -> RD_LOAD_WORD3;
    RD_LOAD_WORD3 -> RD_LOAD_WAIT0;
    RD_LOAD_WAIT0 -> RD_LOAD_DONE;

    IDLE -> START_WR;
    START_WR -> WR_MISS;
}
